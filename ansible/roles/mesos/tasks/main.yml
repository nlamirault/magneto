- name: Install Apache Mesos dependencies
  apt: pkg={{ item }} state=present
  with_items:
    - build-essential
    - openjdk-6-jdk
    - python-setuptools
    - python-dev
    - python-protobuf
    - libcurl4-nss-dev
    - libsasl2-dev
    - curl

- name: Download Apache Mesos
  get_url: url={{ mesos_download_url }}/mesos_{{ mesos_version }}_amd64.deb dest=/opt/mesos-{{ mesos_version }}.deb

- name: Install Apache Mesos Debian Package
  shell: dpkg -i /opt/mesos-{{ mesos_version }}.deb

- name: Download Apache Mesos Python egg
  get_url: url={{ mesos_download_url }}/mesos-{{ mesos_version }}-py2.7-linux-x86_64.egg dest=/opt/mesos-{{ mesos_version }}-py.egg

- name: Install Apache Mesos Python egg
  shell: easy_install /opt/mesos-{{ mesos_version }}-py.egg

- name: Install Apache Mesos master configuration
  template: src=mesos-master.j2 dest=/etc/init/mesos-master.conf owner=root group=root mode=0644

- name: Install Apache Mesos slave 1 configuration
  template: src=mesos-slave1.j2 dest=/etc/init/mesos-slave1.conf owner=root group=root mode=0644

- name: Install Apache Mesos slave 2 configuration
  template: src=mesos-slave2.j2 dest=/etc/init/mesos-slave2.conf owner=root group=root mode=0644
